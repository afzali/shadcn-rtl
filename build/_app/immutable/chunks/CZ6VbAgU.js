import"./DsnmJJEf.js";import{q as z,j as m,h as S,g as r,u as b,p as at,bc as lt,ar as Z,d as I,f as T,c as H,k as L,l as j,s as $,r as V,a as _,e as k,i as O,b as A,n as ct,t as ut}from"./BhV4zVcd.js";import{i as tt,c as et,b as pt}from"./tuqvO9WI.js";import{p as g,r as B,s as nt}from"./wyqmu6xp.js";import{c as K}from"./BVwZMugY.js";import{b as D}from"./xUN7p0v8.js";import{l as J,a as N,e as ht,k as dt,c as U,b as w,m as M}from"./Bya0hm2E.js";import{w as mt,n as Q}from"./fQonjguN.js";import{s as ft}from"./BkJOJKCM.js";import{o as gt}from"./Ceos10N3.js";import{g as vt,P as wt,D as bt}from"./Bk28lIIc.js";const Pt=18,st=40,yt=`${st}px`,_t=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function xt({containerRef:v,inputRef:t,pushPasswordManagerStrategy:e,isFocused:n,domContext:s}){let a=S(!1),u=S(!1),p=S(!1);function f(){const i=e.current;return i==="none"?!1:i==="increase-width"&&r(a)&&r(u)}function c(){const i=v.current,l=t.current;if(!i||!l||r(p)||e.current==="none")return;const o=i,h=o.getBoundingClientRect().left+o.offsetWidth,d=o.getBoundingClientRect().top+o.offsetHeight/2,y=h-Pt,x=d;s.querySelectorAll(_t).length===0&&s.getDocument().elementFromPoint(y,x)===i||(m(a,!0),m(p,!0))}return z(()=>{const i=v.current;if(!i||e.current==="none")return;function l(){const d=vt(i).innerWidth-i.getBoundingClientRect().right;m(u,d>=st)}l();const o=setInterval(l,1e3);return()=>{clearInterval(o)}}),z(()=>{const i=n.current||s.getActiveElement()===t.current;if(e.current==="none"||!i)return;const l=setTimeout(c,0),o=setTimeout(c,2e3),h=setTimeout(c,5e3),d=setTimeout(()=>{m(p,!0)},6e3);return()=>{clearTimeout(l),clearTimeout(o),clearTimeout(h),clearTimeout(d)}}),{get hasPwmBadge(){return r(a)},get willPushPwmBadge(){return f()},PWM_BADGE_SPACE_WIDTH:yt}}const rt=ht({component:"pin-input",parts:["root","cell"]}),St=["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","Escape","Enter","Tab","Shift","Control","Meta"];class q{static create(t){return new q(t)}opts;attachment;#t=J(null);#a=S(!1);inputAttachment=N(this.#t);#r=J(!1);#e=S(null);#n=S(null);#l=new wt(()=>this.opts.value.current??"");#s=b(()=>typeof this.opts.pattern.current=="string"?new RegExp(this.opts.pattern.current):this.opts.pattern.current);#i=S(at({prev:[null,null,"none"],willSyntheticBlur:!1}));#o;#c;domContext;constructor(t){this.opts=t,this.attachment=N(this.opts.ref),this.domContext=new bt(t.ref),this.#c={value:this.opts.value,isIOS:typeof window<"u"&&window?.CSS?.supports("-webkit-touch-callout","none")},this.#o=xt({containerRef:this.opts.ref,inputRef:this.#t,isFocused:this.#r,pushPasswordManagerStrategy:this.opts.pushPasswordManagerStrategy,domContext:this.domContext}),gt(()=>{const e=this.#t.current,n=this.opts.ref.current;if(!e||!n)return;this.#c.value.current!==e.value&&(this.opts.value.current=e.value),r(this.#i).prev=[e.selectionStart,e.selectionEnd,e.selectionDirection??"none"];const s=lt(this.domContext.getDocument(),"selectionchange",this.#h,{capture:!0});this.#h(),this.domContext.getActiveElement()===e&&(this.#r.current=!0),this.domContext.getElementById("pin-input-style")||this.#v();const a=()=>{n&&n.style.setProperty("--bits-pin-input-root-height",`${e.clientHeight}px`)};a();const u=new ResizeObserver(a);return u.observe(e),()=>{s(),u.disconnect()}}),mt([()=>this.opts.value.current,()=>this.#t.current],()=>{Et(()=>{const e=this.#t.current;if(!e)return;e.dispatchEvent(new Event("input"));const n=e.selectionStart,s=e.selectionEnd,a=e.selectionDirection??"none";n!==null&&s!==null&&(m(this.#e,n,!0),m(this.#n,s,!0),r(this.#i).prev=[n,s,a])},this.domContext)}),z(()=>{const e=this.opts.value.current,n=this.#l.current,s=this.opts.maxLength.current,a=this.opts.onComplete.current;n!==void 0&&e!==n&&n.length<s&&e.length===s&&a(e)})}onkeydown=t=>{const e=t.key;St.includes(e)||t.ctrlKey||t.metaKey||e&&r(this.#s)&&!r(this.#s).test(e)&&t.preventDefault()};#f=b(()=>({position:"relative",cursor:this.opts.disabled.current?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}));#u=b(()=>({id:this.opts.id.current,[rt.root]:"",style:r(this.#f),...this.attachment}));get rootProps(){return r(this.#u)}set rootProps(t){m(this.#u,t)}#p=b(()=>({style:{position:"absolute",inset:0,pointerEvents:"none"}}));get inputWrapperProps(){return r(this.#p)}set inputWrapperProps(t){m(this.#p,t)}#g=b(()=>({position:"absolute",inset:0,width:this.#o.willPushPwmBadge?`calc(100% + ${this.#o.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:this.#o.willPushPwmBadge?`inset(0 ${this.#o.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:this.opts.textAlign.current,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--bits-pin-input-root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}));#v(){const t=this.domContext.getDocument(),e=t.createElement("style");if(e.id="pin-input-style",t.head.appendChild(e),e.sheet){const n="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";C(e.sheet,"[data-pin-input-input]::selection { background: transparent !important; color: transparent !important; }"),C(e.sheet,`[data-pin-input-input]:autofill { ${n} }`),C(e.sheet,`[data-pin-input-input]:-webkit-autofill { ${n} }`),C(e.sheet,"@supports (-webkit-touch-callout: none) { [data-pin-input-input] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),C(e.sheet,"[data-pin-input-input] + * { pointer-events: all !important; }")}}#h=()=>{const t=this.#t.current,e=this.opts.ref.current;if(!t||!e)return;if(this.domContext.getActiveElement()!==t){m(this.#e,null),m(this.#n,null);return}const n=t.selectionStart,s=t.selectionEnd,a=t.selectionDirection??"none",u=t.maxLength,p=t.value,f=r(this.#i).prev;let c=-1,i=-1,l;if(p.length!==0&&n!==null&&s!==null){const y=n===s,x=n===p.length&&p.length<u;if(y&&!x){const P=n;if(P===0)c=0,i=1,l="forward";else if(P===u)c=P-1,i=P,l="backward";else if(u>1&&p.length>1){let E=0;if(f[0]!==null&&f[1]!==null){l=P<f[0]?"backward":"forward";const G=f[0]===f[1]&&f[0]<u;l==="backward"&&!G&&(E=-1)}c=E-P,i=E+P+1}}c!==-1&&i!==-1&&c!==i&&this.#t.current?.setSelectionRange(c,i,l)}const o=c!==-1?c:n,h=i!==-1?i:s,d=l??a;m(this.#e,o,!0),m(this.#n,h,!0),r(this.#i).prev=[o,h,d]};oninput=t=>{const e=t.currentTarget.value.slice(0,this.opts.maxLength.current);if(e.length>0&&r(this.#s)&&!r(this.#s).test(e)){t.preventDefault();return}typeof this.#l.current=="string"&&e.length<this.#l.current.length&&this.domContext.getDocument().dispatchEvent(new Event("selectionchange")),this.opts.value.current=e};onfocus=t=>{const e=this.#t.current;if(e){const n=Math.min(e.value.length,this.opts.maxLength.current-1),s=e.value.length;e.setSelectionRange(n,s),m(this.#e,n,!0),m(this.#n,s,!0)}this.#r.current=!0};onpaste=t=>{const e=this.#t.current;if(!e)return;const n=i=>{const l=e.selectionStart===null?void 0:e.selectionStart,o=e.selectionEnd===null?void 0:e.selectionEnd,h=l!==o,d=this.opts.value.current;return(h?d.slice(0,l)+i+d.slice(o):d.slice(0,l)+i+d.slice(l)).slice(0,this.opts.maxLength.current)},s=i=>i.length>0&&r(this.#s)&&!r(this.#s).test(i);if(!this.opts.pasteTransformer?.current&&(!this.#c.isIOS||!t.clipboardData||!e)){const i=n(t.clipboardData?.getData("text/plain"));s(i)&&t.preventDefault();return}const a=t.clipboardData?.getData("text/plain")??"",u=this.opts.pasteTransformer?.current?this.opts.pasteTransformer.current(a):a;t.preventDefault();const p=n(u);if(s(p))return;e.value=p,this.opts.value.current=p;const f=Math.min(p.length,this.opts.maxLength.current-1),c=p.length;e.setSelectionRange(f,c),m(this.#e,f,!0),m(this.#n,c,!0)};onmouseover=t=>{m(this.#a,!0)};onmouseleave=t=>{m(this.#a,!1)};onblur=t=>{if(r(this.#i).willSyntheticBlur){r(this.#i).willSyntheticBlur=!1;return}this.#r.current=!1};#d=b(()=>({id:this.opts.inputId.current,style:r(this.#g),autocomplete:this.opts.autocomplete.current||"one-time-code","data-pin-input-input":"","data-pin-input-input-mss":r(this.#e),"data-pin-input-input-mse":r(this.#n),inputmode:this.opts.inputmode.current,pattern:r(this.#s)?.source,maxlength:this.opts.maxLength.current,value:this.opts.value.current,disabled:dt(this.opts.disabled.current),onpaste:this.onpaste,oninput:this.oninput,onkeydown:this.onkeydown,onmouseover:this.onmouseover,onmouseleave:this.onmouseleave,onfocus:this.onfocus,onblur:this.onblur,...this.inputAttachment}));get inputProps(){return r(this.#d)}set inputProps(t){m(this.#d,t)}#w=b(()=>Array.from({length:this.opts.maxLength.current}).map((t,e)=>{const n=this.#r.current&&r(this.#e)!==null&&r(this.#n)!==null&&(r(this.#e)===r(this.#n)&&e===r(this.#e)||e>=r(this.#e)&&e<r(this.#n)),s=this.opts.value.current[e]!==void 0?this.opts.value.current[e]:null;return{char:s,isActive:n,hasFakeCaret:n&&s===null}}));#m=b(()=>({cells:r(this.#w),isFocused:this.#r.current,isHovering:r(this.#a)}));get snippetProps(){return r(this.#m)}set snippetProps(t){m(this.#m,t)}}class X{static create(t){return new X(t)}opts;attachment;constructor(t){this.opts=t,this.attachment=N(this.opts.ref)}#t=b(()=>({id:this.opts.id.current,[rt.cell]:"","data-active":this.opts.cell.current.isActive?"":void 0,"data-inactive":this.opts.cell.current.isActive?void 0:"",...this.attachment}));get props(){return r(this.#t)}set props(t){m(this.#t,t)}}function Et(v,t){const e=t.setTimeout(v,0),n=t.setTimeout(v,10),s=t.setTimeout(v,50);return[e,n,s]}function C(v,t){try{v.insertRule(t)}catch{console.error("pin input could not insert CSS rule:",t)}}var Ct=T("<div><!> <div><input/></div></div>");function Dt(v,t){const e=Z();I(t,!0);let n=g(t,"id",19,()=>U(e)),s=g(t,"inputId",19,()=>`${U(e)}-input`),a=g(t,"ref",15,null),u=g(t,"maxlength",3,6),p=g(t,"textalign",3,"left"),f=g(t,"inputmode",3,"numeric"),c=g(t,"onComplete",3,Q),i=g(t,"pushPasswordManagerStrategy",3,"increase-width"),l=g(t,"class",3,""),o=g(t,"autocomplete",3,"one-time-code"),h=g(t,"disabled",3,!1),d=g(t,"value",15,""),y=g(t,"onValueChange",3,Q),x=B(t,["$$slots","$$events","$$legacy","id","inputId","ref","maxlength","textalign","pattern","inputmode","onComplete","pushPasswordManagerStrategy","class","children","autocomplete","disabled","value","onValueChange","pasteTransformer"]);const P=q.create({id:w(()=>n()),ref:w(()=>a(),R=>a(R)),inputId:w(()=>s()),autocomplete:w(()=>o()),maxLength:w(()=>u()),textAlign:w(()=>p()),disabled:w(()=>h()),inputmode:w(()=>f()),pattern:w(()=>t.pattern),onComplete:w(()=>c()),value:w(()=>d(),R=>{d(R),y()(R)}),pushPasswordManagerStrategy:w(()=>i()),pasteTransformer:w(()=>t.pasteTransformer)}),E=b(()=>M(x,P.inputProps)),G=b(()=>M(P.rootProps,{class:l()})),it=b(()=>M(P.inputWrapperProps,{}));var W=Ct();D(W,()=>({...r(G)}));var Y=H(W);L(Y,()=>t.children??j,()=>P.snippetProps);var F=$(Y,2);D(F,()=>({...r(it)}));var ot=H(F);D(ot,()=>({...r(E)}),void 0,void 0,void 0,!0),V(F),V(W),_(v,W),k()}var At=T("<div><!></div>");function It(v,t){const e=Z();I(t,!0);let n=g(t,"id",19,()=>U(e)),s=g(t,"ref",15,null),a=B(t,["$$slots","$$events","$$legacy","id","ref","cell","child","children"]);const u=X.create({id:w(()=>n()),ref:w(()=>s(),o=>s(o)),cell:w(()=>t.cell)}),p=b(()=>M(a,u.props));var f=O(),c=A(f);{var i=o=>{var h=O(),d=A(h);L(d,()=>t.child,()=>({props:r(p)})),_(o,h)},l=o=>{var h=At();D(h,()=>({...r(p)}));var d=H(h);L(d,()=>t.children??j),V(h),_(o,h)};tt(c,o=>{t.child?o(i):o(l,!1)})}_(v,f),k()}function Ut(v,t){I(t,!0);let e=g(t,"ref",15,null),n=g(t,"value",15,""),s=B(t,["$$slots","$$events","$$legacy","ref","class","value"]);var a=O(),u=A(a);{let p=b(()=>K("has-disabled:opacity-50 flex items-center gap-2 [&_input]:disabled:cursor-not-allowed",t.class));et(u,()=>Dt,(f,c)=>{c(f,nt({"data-slot":"input-otp",get class(){return r(p)}},()=>s,{get ref(){return e()},set ref(i){e(i)},get value(){return n()},set value(i){n(i)}}))})}_(v,a),k()}var Tt=T("<div><!></div>");function jt(v,t){I(t,!0);let e=g(t,"ref",15,null),n=B(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=Tt();D(s,u=>({"data-slot":"input-otp-group",class:u,...n}),[()=>K("flex items-center",t.class)]);var a=H(s);L(a,()=>t.children??j),V(s),pt(s,u=>e(u),()=>e()),_(v,s),k()}var kt=T('<div class="pointer-events-none absolute inset-0 flex items-center justify-center"><div class="animate-caret-blink bg-foreground h-4 w-px duration-1000"></div></div>'),Bt=T(" <!>",1);function Kt(v,t){I(t,!0);let e=g(t,"ref",15,null),n=B(t,["$$slots","$$events","$$legacy","ref","cell","class"]);var s=O(),a=A(s);{let u=b(()=>K("border-input aria-invalid:border-destructive dark:bg-input/30 relative flex size-9 items-center justify-center border-y border-r text-sm outline-none transition-all first:rounded-l-md first:border-l last:rounded-r-md",t.cell.isActive&&"border-ring ring-ring/50 aria-invalid:border-destructive dark:aria-invalid:ring-destructive/40 aria-invalid:ring-destructive/20 ring-offset-background z-10 ring-[3px]",t.class));et(a,()=>It,(p,f)=>{f(p,nt({get cell(){return t.cell},"data-slot":"input-otp-slot",get class(){return r(u)}},()=>n,{get ref(){return e()},set ref(c){e(c)},children:(c,i)=>{ct();var l=Bt(),o=A(l),h=$(o);{var d=y=>{var x=kt();_(y,x)};tt(h,y=>{t.cell.hasFakeCaret&&y(d)})}ut(()=>ft(o,`${t.cell.char??""} `)),_(c,l)},$$slots:{default:!0}}))})}_(v,s),k()}export{Ut as I,jt as a,Kt as b};
