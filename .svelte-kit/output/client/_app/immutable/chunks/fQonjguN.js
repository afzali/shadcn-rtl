import{c as d}from"./BkJOJKCM.js";import{bc as i,X as p,q as w,B as m}from"./BhV4zVcd.js";const h=typeof window<"u"?window:void 0;function b(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class v{#e;#t;constructor(e={}){const{window:n=h,document:s=n?.document}=e;n!==void 0&&(this.#e=s,this.#t=d(c=>{const o=i(n,"focusin",c),r=i(n,"focusout",c);return()=>{o(),r()}}))}get current(){return this.#t?.(),this.#e?b(this.#e):null}}new v;function y(t,e){switch(t){case"post":w(e);break;case"pre":p(e);break}}function a(t,e,n,s={}){const{lazy:c=!1}=s;let o=!c,r=Array.isArray(t)?[]:void 0;y(e,()=>{const u=Array.isArray(t)?t.map(l=>l()):t();if(!o){o=!0,r=u;return}const f=m(()=>n(u,r));return r=u,f})}function A(t,e,n){a(t,"post",e,n)}function E(t,e,n){a(t,"pre",e,n)}A.pre=E;function g(){}export{h as d,g as n,A as w};
