import{h as t,g as e,s as n}from"./context.js";import"clsx";import{n as r,B as o,o as s,b as i,p as a,t as u,q as c,r as d}from"./create-id.js";function l(t){let e=t;return{[o]:!0,[r]:!0,get current(){return e},set current(t){e=t}}}l.from=s,l.with=i,l.flatten=a,l.readonly=u,l.isBox=c,l.isWritableBox=d;class h{#t;#e;constructor(t){this.#t=t,this.#e=Symbol(t)}get key(){return this.#e}exists(){return t(this.#e)}get(){const t=e(this.#e);if(void 0===t)throw new Error(`Context "${this.#t}" not found`);return t}getOr(t){const n=e(this.#e);return void 0===n?t:n}set(t){return n(this.#e,t)}}const f="ArrowDown",p="ArrowLeft",g="ArrowRight",m="ArrowUp",y="End",w="Enter",b="Escape",v="Home",T="PageDown",S="PageUp",x=" ",C="Tab";function k(t="ltr",e="horizontal"){return{horizontal:"rtl"===t?p:g,vertical:f}[e]}function E(t="ltr",e="horizontal"){return{horizontal:"rtl"===t?g:p,vertical:m}[e]}const I="undefined"!=typeof document,A=I&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent));function z(t){return t instanceof HTMLElement}function P(t){return t instanceof Element}function N(t){return t instanceof Element||t instanceof SVGElement}function K(t){return"touch"===t.pointerType}function H(t){return t.matches(":focus-visible")}function j(t){return null!==t}function B(t){return t instanceof HTMLInputElement&&"select"in t}class D{#n;#r=l(null);constructor(t){this.#n=t}getCandidateNodes(){return[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,e,n=!1){const r=this.#n.rootNode.current;if(!r||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const s=o.indexOf(t),i=(a=r,window.getComputedStyle(a).getPropertyValue("direction"));var a;const{nextKey:u,prevKey:c}=function(t="ltr",e="horizontal"){return["ltr","rtl"].includes(t)||(t="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:k(t,e),prevKey:E(t,e)}}(i,this.#n.orientation.current),d=this.#n.loop.current,l={[u]:s+1,[c]:s-1,[v]:0,[y]:o.length-1};if(n){const t=c===m?p:m;l[u===f?g:f]=s+1,l[t]=s-1}let h=l[e.key];if(void 0===h)return;e.preventDefault(),h<0&&d?h=o.length-1:h===o.length&&d&&(h=0);const w=o[h];return w?(w.focus(),this.#r.current=w.id,this.#n.onCandidateFocus?.(w),w):void 0}getTabIndex(t){const e=this.getCandidateNodes(),n=null!==this.#r.current;return t&&!n&&e[0]===t?(this.#r.current=t.id,0):t?.id===this.#r.current?0:-1}setCurrentTabStopId(t){this.#r.current=t}focusCurrentTabStop(){const t=this.#r.current;if(!t)return;const e=this.#n.rootNode.current?.querySelector(`#${t}`);e&&z(e)&&e.focus()}}export{p as A,h as C,w as E,v as H,S as P,D as R,x as S,C as T,H as a,P as b,g as c,m as d,f as e,y as f,N as g,z as h,K as i,T as j,A as k,I as l,B as m,b as n,j as o};
