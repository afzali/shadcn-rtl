import{v as t,p as s,k as e,m as r,s as o}from"./index.js";import{c as i}from"./button2.js";import{s as n,g as a}from"./context.js";import{n as p,w as u}from"./noop.js";import{C as d,E as c,S as l,R as h}from"./roving-focus-group.js";import{a as v,d as g,e as f,h as m,f as x,c as b,b as P,m as $,i as y}from"./create-id.js";import{c as w}from"./rtl-utils.js";import{tv as k}from"tailwind-variants";const z=g({component:"toggle",parts:["root"]});class I{static create(t){return new I(t)}opts;attachment;constructor(t){this.opts=t,this.attachment=v(this.opts.ref),this.onclick=this.onclick.bind(this)}onclick(t){this.opts.disabled.current||(this.opts.pressed.current=!this.opts.pressed.current)}#t=t(()=>({pressed:this.opts.pressed.current}));get snippetProps(){return this.#t()}set snippetProps(t){return this.#t(t)}#s=t(()=>{return{[z.root]:"",id:this.opts.id.current,"data-disabled":x(this.opts.disabled.current),"aria-pressed":m(this.opts.pressed.current),"data-state":(t=this.opts.pressed.current,t?"on":"off"),disabled:f(this.opts.disabled.current),onclick:this.onclick,...this.attachment};var t});get props(){return this.#s()}set props(t){return this.#s(t)}}const j=g({component:"toggle-group",parts:["root","item"]}),F=new d("ToggleGroup.Root");class G{opts;rovingFocusGroup;attachment;constructor(t){this.opts=t,this.attachment=v(this.opts.ref),this.rovingFocusGroup=new h({candidateAttr:j.item,rootNode:t.ref,loop:t.loop,orientation:t.orientation})}#s=t(()=>({id:this.opts.id.current,[j.root]:"",role:"group","data-orientation":this.opts.orientation.current,"data-disabled":x(this.opts.disabled.current),...this.attachment}));get props(){return this.#s()}set props(t){return this.#s(t)}}class C extends G{opts;isMulti=!1;#e=t(()=>""!==this.opts.value.current);get anyPressed(){return this.#e()}set anyPressed(t){return this.#e(t)}constructor(t){super(t),this.opts=t}includesItem(t){return this.opts.value.current===t}toggleItem(t,s){this.includesItem(t)?this.opts.value.current="":(this.opts.value.current=t,this.rovingFocusGroup.setCurrentTabStopId(s))}}class D extends G{opts;isMulti=!0;#e=t(()=>this.opts.value.current.length>0);get anyPressed(){return this.#e()}set anyPressed(t){return this.#e(t)}constructor(t){super(t),this.opts=t}includesItem(t){return this.opts.value.current.includes(t)}toggleItem(t,s){this.includesItem(t)?this.opts.value.current=this.opts.value.current.filter(s=>s!==t):(this.opts.value.current=[...this.opts.value.current,t],this.rovingFocusGroup.setCurrentTabStopId(s))}}class M{static create(t){const{type:s,...e}=t,r="single"===s?new C(e):new D(e);return F.set(r)}}class T{static create(t){return new T(t,F.get())}opts;root;attachment;#r=t(()=>this.opts.disabled.current||this.root.opts.disabled.current);#o=t(()=>this.root.includesItem(this.opts.value.current));get isPressed(){return this.#o()}set isPressed(t){return this.#o(t)}#i=t(()=>this.root.isMulti?void 0:y(this.isPressed,!1));#n=t(()=>this.root.isMulti?m(this.isPressed):void 0);constructor(t,s){this.opts=t,this.root=s,this.attachment=v(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}#a(){this.#r()||this.root.toggleItem(this.opts.value.current,this.opts.id.current)}onclick(t){this.#r()||this.root.toggleItem(this.opts.value.current,this.opts.id.current)}onkeydown(t){if(!this.#r())return t.key===c||t.key===l?(t.preventDefault(),void this.#a()):void(this.root.opts.rovingFocus.current&&this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,t))}#p=0;#t=t(()=>({pressed:this.isPressed}));get snippetProps(){return this.#t()}set snippetProps(t){return this.#t(t)}#s=t(()=>{return{id:this.opts.id.current,role:this.root.isMulti?void 0:"radio",tabindex:this.#p,"data-orientation":this.root.opts.orientation.current,"data-disabled":x(this.#r()),"data-state":(t=this.isPressed,t?"on":"off"),"data-value":this.opts.value.current,"aria-pressed":this.#n(),"aria-checked":this.#i(),disabled:f(this.#r()),[j.item]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment};var t});get props(){return this.#s()}set props(t){return this.#s(t)}}function S(t,a){t.component(t=>{let{ref:d=null,value:c,class:l,size:h="default",variant:v="default",$$slots:g,$$events:f,...m}=a;n("toggleGroup",{variant:v,size:h});let x,y=!0;function w(t){t.push("\x3c!----\x3e"),function(t,o){t.component(t=>{const i=s(t);let{id:n=b(i),ref:a=null,value:d,onValueChange:c=p,type:l,disabled:h=!1,loop:v=!0,orientation:g="horizontal",rovingFocus:f=!0,child:m,children:x,$$slots:y,$$events:w,...k}=o;function z(){void 0===d&&(d="single"===l?"":[])}z(),u.pre(()=>d,()=>{z()});const I=M.create({id:P(()=>n),value:P(()=>d,t=>{d=t,c(t)}),disabled:P(()=>h),loop:P(()=>v),orientation:P(()=>g),rovingFocus:P(()=>f),type:l,ref:P(()=>a,t=>a=t)}),j=$(k,I.props);m?(t.push("\x3c!--[--\x3e"),m(t,{props:j}),t.push("\x3c!----\x3e")):(t.push("\x3c!--[!--\x3e"),t.push(`<div${e({...j})}>`),x?.(t),t.push("\x3c!----\x3e</div>")),t.push("\x3c!--]--\x3e"),r(o,{ref:a,value:d})})}(t,o([{"data-slot":"toggle-group","data-variant":v,"data-size":h,class:i("group/toggle-group data-[variant=outline]:shadow-xs flex w-fit items-center rounded-md",l)},m,{get value(){return c},set value(t){c=t,y=!1},get ref(){return d},set ref(t){d=t,y=!1}}])),t.push("\x3c!----\x3e")}do{y=!0,x=t.copy(),w(x)}while(!y);t.subsume(x),r(a,{ref:d,value:c})})}function _(t,s){let{$$slots:e,$$events:r,...i}=s;S(t,o([i]))}const R=k({base:"hover:bg-muted hover:text-muted-foreground data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-[color,box-shadow] focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",variants:{variant:{default:"bg-transparent",outline:"border-input shadow-xs hover:bg-accent hover:text-accent-foreground border bg-transparent"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function V(t,n){t.component(t=>{let a,{ref:u=null,pressed:d=!1,class:c,size:l="default",variant:h="default",$$slots:v,$$events:g,...f}=n,m=!0;function x(t){t.push("\x3c!----\x3e"),function(t,o){t.component(t=>{const i=s(t);let{ref:n=null,id:a=b(i),pressed:u=!1,onPressedChange:d=p,disabled:c=!1,type:l="button",children:h,child:v,$$slots:g,$$events:f,...m}=o;const x=I.create({pressed:P(()=>u,t=>{u=t,d(t)}),disabled:P(()=>c??!1),id:P(()=>a),ref:P(()=>n,t=>n=t)}),y=$(m,x.props,{type:l});v?(t.push("\x3c!--[--\x3e"),v(t,{props:y,...x.snippetProps}),t.push("\x3c!----\x3e")):(t.push("\x3c!--[!--\x3e"),t.push(`<button${e({...y})}>`),h?.(t,x.snippetProps),t.push("\x3c!----\x3e</button>")),t.push("\x3c!--]--\x3e"),r(o,{ref:n,pressed:u})})}(t,o([{"data-slot":"toggle",class:i(R({variant:h,size:l}),c)},f,{get ref(){return u},set ref(t){u=t,m=!1},get pressed(){return d},set pressed(t){d=t,m=!1}}])),t.push("\x3c!----\x3e")}do{m=!0,a=t.copy(),x(a)}while(!m);t.subsume(a),r(n,{ref:u,pressed:d})})}function A(t,i){t.component(t=>{let{ref:n=null,value:p,class:u,size:d,variant:c,$$slots:l,$$events:h,...v}=i;const g=a("toggleGroup");let f,m=!0;function x(t){t.push("\x3c!----\x3e"),function(t,o){t.component(t=>{const i=s(t);let{children:n,child:a,ref:p=null,value:u,disabled:d=!1,id:c=b(i),type:l="button",$$slots:h,$$events:v,...g}=o;const f=T.create({id:P(()=>c),value:P(()=>u),disabled:P(()=>d??!1),ref:P(()=>p,t=>p=t)}),m=$(g,f.props,{type:l});a?(t.push("\x3c!--[--\x3e"),a(t,{props:m,...f.snippetProps}),t.push("\x3c!----\x3e")):(t.push("\x3c!--[!--\x3e"),t.push(`<button${e({...m})}>`),n?.(t,f.snippetProps),t.push("\x3c!----\x3e</button>")),t.push("\x3c!--]--\x3e"),r(o,{ref:p})})}(t,o([{"data-slot":"toggle-group-item","data-variant":g.variant||c,"data-size":g.size||d,class:w(R({variant:g.variant||c,size:g.size||d}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-r-md last:rounded-l-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",u),value:p},v,{get ref(){return n},set ref(t){n=t,m=!1}}])),t.push("\x3c!----\x3e")}do{m=!0,f=t.copy(),x(f)}while(!m);t.subsume(f),r(i,{ref:n,value:p})})}export{_ as T,A as a,V as b};
